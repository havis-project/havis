<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>하비스 회원가입</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            white-space: nowrap;

            font-family: "Jua", sans-serif;
            font-size: 30px;
        }

        body {
            background-image: url('/images/pastelBackground.jpg');
            background-repeat: no-repeat;
            background-size: cover;

            height: 100vh;
            width: 100vw;

            display: flex;
            align-items: center;
            justify-content: center;
        }

        header {
            font-size: 35px;

            margin-top: 20px;
            margin-bottom: 20px;
        }

        .signupSection {
            height: 700px;
            width: 700px;

            position: absolute;

            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;

            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.1); /* 요소를 반투명 처리 해준 후 */
            backdrop-filter: blur(15px); /* 요소 뒤에서 효과 적용 */
            box-shadow: 2px 7px 15px 8px rgb(0, 0, 0, 0.3); /* 그림자 적용 */
        }

        div {
            margin-bottom: 10px;
        }

        input {
            text-align: center;
            background: none;

            outline: none;

            width: 300px;
            height: 40px;

            border: 1px solid black;
            border-radius: 10px;

            font-size: 20px;
        }

        select {
            text-align: center;
            background: none;

            height: 40px;

            font-size: 20px;

            border-radius: 10px;
        }

        option {
            font-size: 20px;
        }

        .birthday input {
            width: 250px;
        }

        button {
            display: inline-block;

            background: none;

            width: 150px;
            height: 60px;

            border-radius: 10px;

            cursor: pointer;
        }

        button:hover {
            background-color: lightblue;
        }

        .back:hover {
            background-color: lightcoral;
        }

        button:active {
            position: relative;
            top: 1px;
        }
    </style>
    <script src="/js/location.js"></script>
    <script>

        function validateForm() {
            const memberId = document.getElementById("memberId").value;
            const password = document.getElementById("password").value;
            const pwCheck = document.getElementById("pwCheck").value;
            const nickname = document.getElementById("nickname").value;
            const email = document.getElementById("email").value;
            const name = document.getElementById("name").value;
            const phone = document.getElementById("phone").value;
            const birthday = document.getElementById("birthday").value;

            const idPattern = /^[a-zA-Z0-9-_]+$/;
            const pwPattern = /^[a-zA-Z0-9!@#$%^&*()-_]+$/;
            const nicknamePattern = /^[a-zA-Z0-9가-힇]+$/;
            const phonePattern = /^[0-9]+$/;

                    // 유효성 검사
                    if (memberId === "") {
                        alert("아이디는 필수항목 입니다!");
                        return false;
                    } else if (!idPattern.test(memberId)) {
                        alert("아이디에 사용할 수 없는 문자가 포함되어 있습니다!\n" +
                            "공백 없이 [영어, 숫자, 특수기호 (_), (-)]만 사용 가능")
                        return false;
                    } else if (memberId.length < 6 || memberId.length > 12) {
                        alert("아이디의 길이가 올바르지 않습니다!\n" +
                            "아이디는 [최소 6자, 최대 12자]로 구성되어야 합니다.")
                        return false;
                    }

                    if (password === "") {
                        alert("비밀번호는 필수항목 입니다!");
                        return false;
                    } else if (!pwPattern.test(password)) {
                        alert("비밀번호에 사용할 수 없는 문자가 포함되어 있습니다!\n" +
                            "공백 없이 [영어, 숫자, 사용 가능한 특수기호]로만 구성되어야 합니다.\n" +
                            "사용 가능한 특수기호 : ! @ # $ % ^ & * ( ) _ -")
                        return false;
                    } else if (password.length < 8 || password.length > 20) {
                        alert("비밀번호의 길이가 올바르지 않습니다!\n" +
                            "비밀번호는 [최소 8자, 최대 20자]로 구성되어야 합니다.")
                        return false;
                    }

                    if (pwCheck !== password) {
                        alert("비밀번호 확인이 일치하지 않습니다!");
                        return false;
                    }

                    if (nickname === "") {
                        alert("닉네임은 필수항목 입니다!");
                        return false;
                    } else if (!nicknamePattern.test(nickname)) {
                        alert("닉네임에 사용할 수 없는 문자가 포함되어 있습니다!\n" +
                            "공백 없이 [영어, 숫자, 한글(자음, 모음 단독 사용 불가)]로 구성되어야 합니다.")
                        return false;
                    } else if (nickname.length > 10) {
                        alert("닉네임의 길이가 너무 깁니다!\n" +
                            "최대 [10자]까지 설정 가능합니다.")
                        return false;
                    }

                    if (email === "") {
                        alert("이메일은 필수항목 입니다!");
                        return false;
                    }

                    if (name === "") {
                        alert("이름은 필수항목 입니다!");
                        return false;
                    }

                    if (phone === "") {
                        alert("휴대폰 번호는 필수항목 입니다!")
                        return false;
                    } else if (!phonePattern.test(phone)) {
                        alert("휴대폰 번호의 양식이 맞지 않습니다!\n" +
                            "('-'는 제외하고 숫자로만 구성되어야 합니다.");
                        return false;
                    }

                    if (birthday === "") {
                        alert("생년월일은 필수항목 입니다!");
                        return false;
                    }

                    return true;
        }
    </script>

</head>

<body>
<div class="signupSection">
    <header>하비스 회원가입</header>
    <form name="signupForm" th:action="@{/member/register}" th:method="post">

        <div class="memberId">
            <label for="memberId">아이디 : </label>
            <input type="text" id="memberId" name="memberId" placeholder="사용하실 [아이디]를 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='사용하실 [아이디]를 입력하세요'">
        </div>

        <div class="password">
            <label for="password">비밀번호 : </label>
            <input type="password" id="password" name="password" placeholder="사용하실 [비밀번호]를 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='사용하실 [비밀번호]를 입력하세요'">
        </div>

        <div class="pwCheck">
            <label for="pwCheck">비밀번호 확인 : </label>
            <input type="password" id="pwCheck" name="pwCheck" placeholder="[비밀번호]를 한번 더 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='[비밀번호]를 한번 더 입력하세요'">
        </div>

        <div class="nickname">
            <label for="nickname">닉네임 : </label>
            <input type="text" id="nickname" name="nickname" placeholder="사용하실 [닉네임]을 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='사용하실 [닉네임]을 입력하세요'">
        </div>

        <div class="email">
            <label for="email">이메일 : </label>
            <input type="email" id="email" name="email" placeholder="사용하실 [이메일]을 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='사용하실 [이메일]을 입력하세요'">
        </div>

        <div class="name">
            <label for="name">이름 : </label>
            <input type="text" id="name" name="name" placeholder="[본명]을 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='[본명]을 입력하세요'">
        </div>

        <div class="phone">
            <label for="phone">휴대폰 번호('-' 제외) : </label>
            <input type="text" id="phone" name="phone" maxlength="11" placeholder="[휴대폰 번호]를 입력하세요"
                   onfocus="this.placeholder=''" onblur="this.placeholder='[휴대폰 번호]를 입력하세요'">
        </div>

        <div class="birthday">
            <label class="title birthday">생년월일 : </label>
            <input type="date" id="birthday" name="birthday">
        </div>

        <div class="location">
            <label class="title loction">활동지(선택) : </label>
            <select id="sido" name="sido">
            </select>
            <select id="sigugun" name="sigugun">
            </select>
        </div>

        <div class="buttonSection">
            <button type="submit" onclick="return validateForm()">가입하기</button>
            <button class="back" type="button" onclick="location.href='/'">안할래요</button>
        </div>
    </form>
</div>
</body>
</html>